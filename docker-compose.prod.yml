services:
  # ============================================
  # Frontend - React Application
  # ============================================
  frontend-service:
    image: ${FRONTEND_DOCKER_REGISTRY}/${FRONTEND_IMAGE_NAME}:${FRONTEND_IMAGE_TAG}
    container_name: everage-frontend-dev
    ports:
      - "80:80"
    volumes:
      # Mount videos and static assets from host
      - frontend-static:/usr/share/nginx/html/videos
      - frontend-products:/usr/share/nginx/html/products
    networks:
      - everage-network
    labels:
      logging: "promtail"
      application: "everage-frontend-dev"
      environment: "development"
    restart: unless-stopped
    healthcheck:
      test: [ "CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:80/health" ]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s